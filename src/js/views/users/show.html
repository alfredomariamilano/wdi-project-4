<div class="loading">
  <i class="fa fa-spinner fa-pulse fa-3x fa-fw" ng-if="!show.user"></i>
</div>
<div ng-if="show.user">
  <h1>{{ show.user.username }}</h1>
  <select id="myDropdown" ng-model="sortBy">
    <option selected value>Select Filter</option>
    <option value="movie.title" >Title</option>
    <option value="-movie.vote_average">Score</option>
    <option value="-movie.release_date">Latest releases</option>
  </select>
  <div class="container userShow">
    <div class="six columns">
      <h2>Watched</h2>
      <ul>
        <li ng-repeat="watched in show.user.watched | orderBy: sortBy | unique: 'movie.id' track by $index"><a ui-sref="MoviesShow({id: watched.movie.id})">{{ watched.movie.title }}</a><br />
          <!-- <i ng-repeat="star in watched.movie.vote_average track by $index" class="fa fa-star" aria-hidden="true"></i> -->
          <p ng-if="sortBy == '-movie.vote_average'">
            <i ng-if="watched.movie.vote_average >= 1" class="fa fa-star" aria-hidden="true"></i>
            <i ng-if="watched.movie.vote_average >= 3" class="fa fa-star" aria-hidden="true"></i>
            <i ng-if="watched.movie.vote_average >= 5" class="fa fa-star" aria-hidden="true"></i>
            <i ng-if="watched.movie.vote_average >= 7" class="fa fa-star" aria-hidden="true"></i>
            <i ng-if="watched.movie.vote_average >= 9" class="fa fa-star" aria-hidden="true"></i>
          </p>
          <p ng-if="sortBy == '-movie.release_date'">
            Release date: {{watched.movie.release_date}}
          </p>
        </li>
      </ul>
    </div>
    <div class="six columns">
      <h2>Watchlist</h2>
      <ul>
        <li ng-repeat="unwatched in show.user.not_watched | orderBy: sortBy | unique: 'movie.id' track by $index"><a ui-sref="MoviesShow({id: unwatched.movie.id})">{{ unwatched.movie.title }}</a><br />
          <!-- <i ng-repeat="star in unwatched.movie.vote_average track by $index" class="fa fa-star" aria-hidden="true"></i> -->
          <p ng-if="sortBy == '-movie.vote_average'">
            <i ng-if="unwatched.movie.vote_average >= 1" class="fa fa-star" aria-hidden="true"></i>
            <i ng-if="unwatched.movie.vote_average >= 3" class="fa fa-star" aria-hidden="true"></i>
            <i ng-if="unwatched.movie.vote_average >= 5" class="fa fa-star" aria-hidden="true"></i>
            <i ng-if="unwatched.movie.vote_average >= 7" class="fa fa-star" aria-hidden="true"></i>
            <i ng-if="unwatched.movie.vote_average >= 9" class="fa fa-star" aria-hidden="true"></i>
          </p>
          <p ng-if="sortBy == '-movie.release_date'">
            Release date: {{unwatched.movie.release_date}}
          </p>
        </li>
      </ul>
    </div>
  </div>

</div>
